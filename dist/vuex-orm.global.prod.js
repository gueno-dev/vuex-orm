var VuexORM=function(){"use strict";function t(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}var e=t((function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),n=t((function(t){var e=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=e)})),r=function(t){return"object"==typeof t?null!==t:"function"==typeof t},i=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t},o=function(t){try{return!!t()}catch(t){return!0}},a=!o((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),u=e.document,s=r(u)&&r(u.createElement),c=function(t){return s?u.createElement(t):{}},h=!a&&!o((function(){return 7!=Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a})),f=Object.defineProperty,l={f:a?Object.defineProperty:function(t,e,n){if(i(t),e=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}(e,!0),i(n),h)try{return f(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},d=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},p=a?function(t,e,n){return l.f(t,e,d(1,n))}:function(t,e,n){return t[e]=n,t},y={}.hasOwnProperty,v=function(t,e){return y.call(t,e)},m=0,g=Math.random(),b=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++m+g).toString(36))},w=t((function(t){var r="__core-js_shared__",i=e[r]||(e[r]={});(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})})),O=w("native-function-to-string",Function.toString),K=t((function(t){var r=b("src"),i="toString",o=(""+O).split(i);n.inspectSource=function(t){return O.call(t)},(t.exports=function(t,n,i,a){var u="function"==typeof i;u&&(v(i,"name")||p(i,"name",n)),t[n]!==i&&(u&&(v(i,r)||p(i,r,t[n]?""+t[n]:o.join(String(n)))),t===e?t[n]=i:a?t[n]?t[n]=i:p(t,n,i):(delete t[n],p(t,n,i)))})(Function.prototype,i,(function(){return"function"==typeof this&&this[r]||O.call(this)}))})),R=function(t,e,n){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},M=function(t,r,i){var o,a,u,s,c=t&M.F,h=t&M.G,f=t&M.S,l=t&M.P,d=t&M.B,y=h?e:f?e[r]||(e[r]={}):(e[r]||{}).prototype,v=h?n:n[r]||(n[r]={}),m=v.prototype||(v.prototype={});for(o in h&&(i=r),i)u=((a=!c&&y&&void 0!==y[o])?y:i)[o],s=d&&a?R(u,e):l&&"function"==typeof u?R(Function.call,u):u,y&&K(y,o,u,t&M.U),v[o]!=u&&p(v,o,s),l&&m[o]!=u&&(m[o]=u)};e.core=n,M.F=1,M.G=2,M.S=4,M.P=8,M.B=16,M.W=32,M.U=64,M.R=128;var k=M,I={}.toString,$=function(t){return I.call(t).slice(8,-1)},F=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==$(t)?t.split(""):Object(t)},S=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},E=function(t){return F(S(t))},A=Math.ceil,x=Math.floor,j=function(t){return isNaN(t=+t)?0:(t>0?x:A)(t)},P=Math.min,C=function(t){return t>0?P(j(t),9007199254740991):0},B=Math.max,_=Math.min,T=function(t){return function(e,n,r){var i,o=E(e),a=C(o.length),u=function(t,e){return(t=j(t))<0?B(t+e,0):_(t,e)}(r,a);if(t&&n!=n){for(;a>u;)if((i=o[u++])!=i)return!0}else for(;a>u;u++)if((t||u in o)&&o[u]===n)return t||u||0;return!t&&-1}},H=t((function(t){var n=w("wks"),r=e.Symbol,i="function"==typeof r;(t.exports=function(t){return n[t]||(n[t]=i&&r[t]||(i?r:b)("Symbol."+t))}).store=n})),N=H("unscopables"),U=Array.prototype;null==U[N]&&p(U,N,{});var z,V=T(!0);k(k.P,"Array",{includes:function(t){return V(this,t,arguments.length>1?arguments[1]:void 0)}}),z="includes",U[N][z]=!0;n.Array.includes;var D=w("keys"),W=function(t){return D[t]||(D[t]=b(t))},L=T(!1),G=W("IE_PROTO"),q="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Q=Object.keys||function(t){return function(t,e){var n,r=E(t),i=0,o=[];for(n in r)n!=G&&v(r,n)&&o.push(n);for(;e.length>i;)v(r,n=e[i++])&&(~L(o,n)||o.push(n));return o}(t,q)},J={f:Object.getOwnPropertySymbols},Y={f:{}.propertyIsEnumerable},X=function(t){return Object(S(t))},Z=Object.assign,tt=!Z||o((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=Z({},t)[n]||Object.keys(Z({},e)).join("")!=r}))?function(t,e){for(var n=X(t),r=arguments.length,i=1,o=J.f,u=Y.f;r>i;)for(var s,c=F(arguments[i++]),h=o?Q(c).concat(o(c)):Q(c),f=h.length,l=0;f>l;)s=h[l++],a&&!u.call(c,s)||(n[s]=c[s]);return n}:Z;k(k.S+k.F,"Object",{assign:tt});n.Object.assign;var et=Y.f,nt=function(t){return function(e){for(var n,r=E(e),i=Q(r),o=i.length,u=0,s=[];o>u;)n=i[u++],a&&!et.call(r,n)||s.push(t?[n,r[n]]:r[n]);return s}},rt=nt(!0);k(k.S,"Object",{entries:function(t){return rt(t)}});n.Object.entries;var it=nt(!1);k(k.S,"Object",{values:function(t){return it(t)}});n.Object.values;var ot=H("match"),at=function(t,e,n){if(r(i=e)&&(void 0!==(o=i[ot])?o:"RegExp"==$(i)))throw TypeError("String#"+n+" doesn't accept regex!");var i,o;return String(S(t))},ut=H("match"),st="startsWith",ct="".startsWith;k(k.P+k.F*function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[ut]=!1,!"/./"[t](e)}catch(t){}}return!0}(st),"String",{startsWith:function(t){var e=at(this,t,st),n=C(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return ct?ct.call(e,r,n):e.slice(n,n+r.length)===r}});n.String.startsWith;var ht={},ft=a?Object.defineProperties:function(t,e){i(t);for(var n,r=Q(e),o=r.length,a=0;o>a;)l.f(t,n=r[a++],e[n]);return t},lt=e.document,dt=lt&&lt.documentElement,pt=W("IE_PROTO"),yt=function(){},vt=function(){var t,e=c("iframe"),n=q.length;for(e.style.display="none",dt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),vt=t.F;n--;)delete vt.prototype[q[n]];return vt()},mt=Object.create||function(t,e){var n;return null!==t?(yt.prototype=i(t),n=new yt,yt.prototype=null,n[pt]=t):n=vt(),void 0===e?n:ft(n,e)},gt=l.f,bt=H("toStringTag"),wt=function(t,e,n){t&&!v(t=n?t:t.prototype,bt)&&gt(t,bt,{configurable:!0,value:e})},Ot={};p(Ot,H("iterator"),(function(){return this}));var Kt,Rt=function(t,e,n){t.prototype=mt(Ot,{next:d(1,n)}),wt(t,e+" Iterator")},Mt=W("IE_PROTO"),kt=Object.prototype,It=Object.getPrototypeOf||function(t){return t=X(t),v(t,Mt)?t[Mt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?kt:null},$t=H("iterator"),Ft=!([].keys&&"next"in[].keys()),St="keys",Et="values",At=function(){return this},xt=(Kt=!0,function(t,e){var n,r,i=String(S(t)),o=j(e),a=i.length;return o<0||o>=a?Kt?"":void 0:(n=i.charCodeAt(o))<55296||n>56319||o+1===a||(r=i.charCodeAt(o+1))<56320||r>57343?Kt?i.charAt(o):n:Kt?i.slice(o,o+2):r-56320+(n-55296<<10)+65536});!function(t,e,n,r,i,o,a){Rt(n,e,r);var u,s,c,h=function(t){if(!Ft&&t in y)return y[t];switch(t){case St:case Et:return function(){return new n(this,t)}}return function(){return new n(this,t)}},f=e+" Iterator",l=i==Et,d=!1,y=t.prototype,v=y[$t]||y["@@iterator"]||i&&y[i],m=v||h(i),g=i?l?h("entries"):m:void 0,b="Array"==e&&y.entries||v;if(b&&(c=It(b.call(new t)))!==Object.prototype&&c.next&&(wt(c,f,!0),"function"!=typeof c[$t]&&p(c,$t,At)),l&&v&&v.name!==Et&&(d=!0,m=function(){return v.call(this)}),(Ft||d||!y[$t])&&p(y,$t,m),ht[e]=m,ht[f]=At,i)if(u={values:l?m:h(Et),keys:o?m:h(St),entries:g},a)for(s in u)s in y||K(y,s,u[s]);else k(k.P+k.F*(Ft||d),e,u)}(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=xt(e,n),this._i+=t.length,{value:t,done:!1})}));var jt=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&i(o.call(t)),e}},Pt=H("iterator"),Ct=Array.prototype,Bt=function(t){return void 0!==t&&(ht.Array===t||Ct[Pt]===t)},_t=function(t,e,n){e in t?l.f(t,e,d(0,n)):t[e]=n},Tt=H("toStringTag"),Ht="Arguments"==$(function(){return arguments}()),Nt=H("iterator"),Ut=n.getIteratorMethod=function(t){if(null!=t)return t[Nt]||t["@@iterator"]||ht[function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Tt))?n:Ht?$(e):"Object"==(r=$(e))&&"function"==typeof e.callee?"Arguments":r}(t)]},zt=H("iterator"),Vt=!1;try{var Dt=[7][zt]();Dt.return=function(){Vt=!0},Array.from(Dt,(function(){throw 2}))}catch(t){}k(k.S+k.F*!function(t,e){if(!e&&!Vt)return!1;var n=!1;try{var r=[7],i=r[zt]();i.next=function(){return{done:n=!0}},r[zt]=function(){return i},t(r)}catch(t){}return n}((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,r,i,o=X(t),a="function"==typeof this?this:Array,u=arguments.length,s=u>1?arguments[1]:void 0,c=void 0!==s,h=0,f=Ut(o);if(c&&(s=R(s,u>2?arguments[2]:void 0,2)),null==f||a==Array&&Bt(f))for(n=new a(e=C(o.length));e>h;h++)_t(n,h,c?s(o[h],h):o[h]);else for(i=f.call(o),n=new a;!(r=i.next()).done;h++)_t(n,h,c?jt(i,s,[r.value,h],!0):r.value);return n.length=h,n}});n.Array.from;var Wt=function(){function t(){}return t.register=function(t){this.store=t},t}(),Lt=function(t,e){return(Lt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Gt(t,e){function n(){this.constructor=t}Lt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var qt=function(){return(qt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Qt(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(a,u)}s((r=r.apply(t,e||[])).next())}))}function Jt(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}function Yt(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r}function Xt(t){return Array.isArray(t)}function Zt(t){return Xt(t)?t.length:Object.keys(t).length}function te(t,e){var n=Object.assign({},t);return Object.keys(t).reduce((function(n,r){return n[r]=e(t[r],r,t),n}),n)}function ee(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=void 0!==e,a=null===e,u=e==e;if("number"==typeof t&&"number"==typeof e||(t=String(t),e=String(e)),!a&&t>e||r&&o&&u||!n&&u||!i)return 1;if(!r&&t<e||a&&n&&i||!o&&i||!u)return-1}return 0}var ne={isArray:Xt,size:Zt,isEmpty:function(t){return 0===Zt(t)},forOwn:function(t,e){Object.keys(t).forEach((function(n){return e(t[n],n,t)}))},map:function(t,e){var n=[];for(var r in t)n.push(e(t[r],r,t));return n},mapValues:te,keyBy:function(t,e){var n={};return t.forEach((function(t){n[t[e]]=t})),n},orderBy:function(t,e,n){var r=-1;return function(t,e){var n=t.length;t.sort(e);var r=[];for(;n--;)r[n]=t[n].value;return r}(t.map((function(t){return{criteria:e.map((function(e){return"function"==typeof e?e(t):t[e]})),index:++r,value:t}})),(function(t,e){return function(t,e,n){var r=-1,i=t.criteria,o=e.criteria,a=i.length,u=n.length;for(;++r<a;){var s=ee(i[r],o[r]);if(s)return r>=u?s:s*("desc"===n[r]?-1:1)}return t.index-e.index}(t,e,n)}))},groupBy:function(t,e){return t.reduce((function(t,n){var r=e(n);return void 0===t[r]&&(t[r]=[]),t[r].push(n),t}),{})},cloneDeep:function t(e){if(null===e)return e;if(Xt(e)){var n=[];return e.forEach((function(t){return n.push(t)})),n.map((function(e){return t(e)}))}if("object"==typeof e&&e!=={}){var r=qt({},e);return Object.keys(r).forEach((function(e){return r[e]=t(r[e])})),r}return e}},re=function(){function t(){}return t.make=function(){return this.count++,""+this.prefix+this.count},t.reset=function(){this.count=0},t.count=0,t.prefix="$uid",t}(),ie=function(t){this.model=t},oe=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.isNullable=!1,i.value=n,i.mutator=r,i}return Gt(e,t),e.prototype.nullable=function(){return this.isNullable=!0,this},e.prototype.mutate=function(t,e){var n=this.mutator||this.model.mutators()[e];return n?n(t):t},e}(ie),ae=function(t){function e(e,n,r){var i=t.call(this,e,n,r)||this;return i.className="Attr",i}return Gt(e,t),e.prototype.make=function(t,e,n){var r=t=void 0!==t?t:this.value;return"function"==typeof t&&(r=t()),this.mutate(r,n)},e}(oe),ue=function(t){function e(e,n,r){var i=t.call(this,e,n,r)||this;return i.className="String",i}return Gt(e,t),e.prototype.make=function(t,e,n){return this.mutate(this.fix(t),n)},e.prototype.fix=function(t){return void 0===t?this.value:"string"==typeof t||null===t&&this.isNullable?t:t+""},e}(oe),se=function(t){function e(e,n,r){var i=t.call(this,e,n,r)||this;return i.className="Number",i}return Gt(e,t),e.prototype.make=function(t,e,n){return this.mutate(this.fix(t),n)},e.prototype.fix=function(t){return void 0===t?this.value:"number"==typeof t?t:"string"==typeof t?parseFloat(t):"boolean"==typeof t?t?1:0:null===t&&this.isNullable?t:0},e}(oe),ce=function(t){function e(e,n,r){var i=t.call(this,e,n,r)||this;return i.className="Boolean",i}return Gt(e,t),e.prototype.make=function(t,e,n){return this.mutate(this.fix(t),n)},e.prototype.fix=function(t){if(void 0===t)return this.value;if("boolean"==typeof t)return t;if("string"==typeof t){if(0===t.length)return!1;var e=parseInt(t,0);return!!isNaN(e)||!!e}return"number"==typeof t?!!t:!(null!==t||!this.isNullable)&&t},e}(oe),he=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.className="Uid",r}return Gt(e,t),e.prototype.make=function(t){return"number"==typeof t||"string"==typeof t?t:"function"==typeof this.value?this.value():re.make()},e}(oe),fe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Gt(e,t),e.prototype.getRelation=function(t,e,n){var r=t.newQuery(e);return n.forEach((function(t){t(r)})),r},e.prototype.getKeys=function(t,e){return t.reduce((function(t,n){return null===n[e]||void 0===n[e]||t.push(n[e]),t}),[])},e.prototype.mapSingleRelations=function(t,e){var n=new Map;return t.forEach((function(t){var r=t[e];!n.get(r)&&n.set(r,t)})),n},e.prototype.mapManyRelations=function(t,e){var n=new Map;return t.forEach((function(t){var r=t[e],i=n.get(r);i||(i=[],n.set(r,i)),i.push(t)})),n},e.prototype.mapRelationsByOrders=function(t,e,n,r){var i={};return e.forEach((function(e,o){t.filter((function(t){return t[r]===o})).forEach((function(t){var r=t[n];i[r]||(i[r]=[]),i[r]=i[r].concat(e)}))})),i},e.prototype.isOneRelation=function(t){return!Xt(t)&&null!==t&&"object"==typeof t},e.prototype.isManyRelation=function(t){return!!Xt(t)&&!(t.length<1)},e.prototype.makeOneRelation=function(t,e){return this.isOneRelation(t)?new(e.getModelFromRecord(t)||e)(t):null},e.prototype.makeManyRelation=function(t,e){var n=this;return this.isManyRelation(t)?t.filter((function(t){return n.isOneRelation(t)})).map((function(t){return new(e.getModelFromRecord(t)||e)(t)})):[]},e}(ie),le=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.className="HasOne",o.related=o.model.relation(n),o.foreignKey=r,o.localKey=i,o}return Gt(e,t),e.prototype.define=function(t){return t.one(this.related)},e.prototype.attach=function(t,e,n){e[this.localKey]||(e[this.localKey]=this.model.getIndexIdFromRecord(e));var r=n[this.related.entity]&&n[this.related.entity][t];r&&(r[this.foreignKey]=e[this.localKey])},e.prototype.make=function(t,e,n){return this.makeOneRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this.getRelation(t,this.related.entity,r);this.addEagerConstraints(i,e),this.match(e,i.get(),n)},e.prototype.addEagerConstraints=function(t,e){t.whereFk(this.foreignKey,this.getKeys(e,this.localKey))},e.prototype.match=function(t,e,n){var r=this,i=this.buildDictionary(e);t.forEach((function(t){var e=t[r.localKey],o=i[e];t[n]=o||null}))},e.prototype.buildDictionary=function(t){var e=this;return t.reduce((function(t,n){return t[n[e.foreignKey]]=n,t}),{})},e}(fe),de=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.className="BelongsTo",o.parent=o.model.relation(n),o.foreignKey=r,o.ownerKey=i,o}return Gt(e,t),e.prototype.define=function(t){return t.one(this.parent)},e.prototype.attach=function(t,e,n){void 0===e[this.foreignKey]&&(e[this.foreignKey]=n[this.parent.entity]&&n[this.parent.entity][t]?n[this.parent.entity][t][this.ownerKey]:t)},e.prototype.make=function(t,e,n){return this.makeOneRelation(t,this.parent)},e.prototype.load=function(t,e,n,r){var i=this.getRelation(t,this.parent.entity,r);this.addEagerConstraints(i,e),this.match(e,i.get(),n)},e.prototype.addEagerConstraints=function(t,e){t.whereFk(this.ownerKey,this.getKeys(e,this.foreignKey))},e.prototype.match=function(t,e,n){var r=this,i=this.buildDictionary(e);t.forEach((function(t){var e=t[r.foreignKey],o=null!==e?i[e]:null;t[n]=o||null}))},e.prototype.buildDictionary=function(t){var e=this;return t.reduce((function(t,n){return t[n[e.ownerKey]]=n,t}),{})},e}(fe),pe=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.className="HasMany",o.related=o.model.relation(n),o.foreignKey=r,o.localKey=i,o}return Gt(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){var r=this;t.forEach((function(t){var i=n[r.related.entity];i&&i[t]&&void 0===i[t][r.foreignKey]&&(i[t][r.foreignKey]=e[r.localKey])}))},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this.getRelation(t,this.related.entity,r);this.addEagerConstraints(i,e),this.match(e,i.get(),n)},e.prototype.addEagerConstraints=function(t,e){t.whereFk(this.foreignKey,this.getKeys(e,this.localKey))},e.prototype.match=function(t,e,n){var r=this,i=this.buildDictionary(e);t.forEach((function(t){var e=t[r.localKey],o=i[e];t[n]=o||[]}))},e.prototype.buildDictionary=function(t){var e=this;return t.reduce((function(t,n){var r=n[e.foreignKey];return t[r]||(t[r]=[]),t[r].push(n),t}),{})},e}(fe),ye=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.className="HasManyBy",o.parent=o.model.relation(n),o.foreignKey=r,o.ownerKey=i,o}return Gt(e,t),e.prototype.define=function(t){return t.many(this.parent)},e.prototype.attach=function(t,e,n){var r=this;0!==t.length&&(e[this.foreignKey]=t.map((function(t){return r.parent.getIdFromRecord(n[r.parent.entity][t])})))},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.parent)},e.prototype.load=function(t,e,n,r){var i=this,o=this.getRelation(t,this.parent.entity,r);this.addConstraintForHasManyBy(o,e);var a=this.mapSingleRelations(o.get(),this.ownerKey);e.forEach((function(t){var e=i.getRelatedRecords(a,t[i.foreignKey]);t[n]=e}))},e.prototype.addConstraintForHasManyBy=function(t,e){var n=this,r=e.reduce((function(t,e){return t.concat(e[n.foreignKey])}),[]);t.where(this.ownerKey,r)},e.prototype.getRelatedRecords=function(t,e){var n=[];return t.forEach((function(t,r){-1!==e.indexOf(r)&&n.push(t)})),n},e}(fe),ve=function(t){function e(e,n,r,i,o,a,u){var s=t.call(this,e)||this;return s.className="HasManyThrough",s.related=s.model.relation(n),s.through=s.model.relation(r),s.firstKey=i,s.secondKey=o,s.localKey=a,s.secondLocalKey=u,s}return Gt(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this,o=this.getRelation(t,this.related.entity,r),a=t.newQuery(this.through.entity);this.addEagerConstraintForThrough(a,e);var u=a.get();this.addEagerConstraintForRelated(o,u);var s=this.mapThroughRelations(u,o);e.forEach((function(t){var e=s[t[i.localKey]];t[n]=e||[]}))},e.prototype.addEagerConstraintForThrough=function(t,e){t.where(this.firstKey,this.getKeys(e,this.localKey))},e.prototype.addEagerConstraintForRelated=function(t,e){t.where(this.secondKey,this.getKeys(e,this.secondLocalKey))},e.prototype.mapThroughRelations=function(t,e){var n=this,r=this.mapManyRelations(e.get(),this.secondKey);return t.reduce((function(t,e){var i=e[n.firstKey];t[i]||(t[i]=[]);var o=r.get(e[n.secondLocalKey]);return void 0===o||(t[i]=t[i].concat(o)),t}),{})},e}(fe),me=function(t){function e(e,n,r,i,o,a,u){var s=t.call(this,e)||this;return s.className="BelongsToMany",s.pivotKey="pivot",s.related=s.model.relation(n),s.pivot=s.model.relation(r),s.foreignPivotKey=i,s.relatedPivotKey=o,s.parentKey=a,s.relatedKey=u,s}return Gt(e,t),e.prototype.as=function(t){return this.pivotKey=t,this},e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this,o=this.getRelation(t,this.related.entity,r),a=t.newQuery(this.pivot.entity);this.addEagerConstraintForPivot(a,e);var u=a.get();this.addEagerConstraintForRelated(o,u);var s=this.mapPivotRelations(u,o);e.forEach((function(t){var e=s[t[i.parentKey]];t[n]=e||[]}))},e.prototype.addEagerConstraintForPivot=function(t,e){t.whereFk(this.foreignPivotKey,this.getKeys(e,this.parentKey))},e.prototype.addEagerConstraintForRelated=function(t,e){t.whereFk(this.relatedKey,this.getKeys(e,this.relatedPivotKey))},e.prototype.mapPivotRelations=function(t,e){var n=this,r=this.mapManyRelations(e.get(),this.relatedKey);return e.orders.length?this.mapRelationsByOrders(t,r,this.foreignPivotKey,this.relatedPivotKey):t.reduce((function(t,e){var i=e[n.foreignPivotKey];t[i]||(t[i]=[]);var o=r.get(e[n.relatedPivotKey]);return o&&(t[i]=t[i].concat(o.map((function(t){return t[n.pivotKey]=e,t})))),t}),{})},e.prototype.createPivots=function(t,e,n){var r=this;return ne.isArray(this.pivot.primaryKey)?(ne.forOwn(e[t.entity],(function(t){var i=t[n];void 0!==i&&0!==i.length&&r.createPivotRecord(e,t,i)})),e):e},e.prototype.createPivotRecord=function(t,e,n){var r=this;n.forEach((function(n){var i,o,a=e[r.parentKey],u=t[r.related.entity][n][r.relatedKey],s=JSON.stringify([r.pivot.primaryKey[0]===r.foreignPivotKey?a:u,r.pivot.primaryKey[1]===r.foreignPivotKey?a:u]),c=t[r.pivot.entity]?t[r.pivot.entity][s]:{},h=t[r.related.entity][n][r.pivotKey]||{};t[r.pivot.entity]=qt(qt({},t[r.pivot.entity]),((i={})[s]=qt(qt(qt({},c),h),((o={$id:s})[r.foreignPivotKey]=a,o[r.relatedPivotKey]=u,o)),i))}))},e}(fe),ge=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.className="MorphTo",i.id=n,i.type=r,i}return Gt(e,t),e.prototype.define=function(t){var e=this;return t.union((function(t,n){return n[e.type]}))},e.prototype.attach=function(t,e,n){},e.prototype.make=function(t,e,n){var r=e[this.type];try{var i=this.model.relation(r);return this.makeOneRelation(t,i)}catch(t){return null}},e.prototype.load=function(t,e,n,r){var i=this,o=this.getTypes(e).reduce((function(e,n){var o=i.getRelation(t,n,r);return e[n]=i.mapSingleRelations(o.get(),"$id"),e}),{});e.forEach((function(t){var e=t[i.id],r=t[i.type],a=o[r].get(String(e));t[n]=a||null}))},e.prototype.getTypes=function(t){var e=this;return t.reduce((function(t,n){var r=n[e.type];return!t.includes(r)&&t.push(r),t}),[])},e}(fe),be=function(t){function e(e,n,r,i,o){var a=t.call(this,e)||this;return a.className="MorphOne",a.related=a.model.relation(n),a.id=r,a.type=i,a.localKey=o,a}return Gt(e,t),e.prototype.define=function(t){return t.one(this.related)},e.prototype.attach=function(t,e,n){var r=n[this.related.entity][t];r[this.id]=r[this.id]||this.related.getIdFromRecord(e),r[this.type]=r[this.type]||this.model.entity},e.prototype.make=function(t,e,n){return this.makeOneRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this,o=this.getRelation(t,this.related.entity,r);this.addEagerConstraintForMorphOne(o,e,t.entity);var a=this.mapSingleRelations(o.get(),this.id);e.forEach((function(t){var e=a.get(t[i.localKey]);t[n]=e||null}))},e.prototype.addEagerConstraintForMorphOne=function(t,e,n){t.whereFk(this.type,n).whereFk(this.id,this.getKeys(e,this.localKey))},e}(fe),we=function(t){function e(e,n,r,i,o){var a=t.call(this,e)||this;return a.className="MorphMany",a.related=a.model.relation(n),a.id=r,a.type=i,a.localKey=o,a}return Gt(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){var r=this,i=n[this.related.entity];t.forEach((function(t){var n=i[t];n[r.id]=n[r.id]||r.related.getIdFromRecord(e),n[r.type]=n[r.type]||r.model.entity}))},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this,o=this.getRelation(t,this.related.entity,r);this.addEagerConstraintForMorphMany(o,e,t.entity);var a=this.mapManyRelations(o.get(),this.id);e.forEach((function(t){var e=a.get(t[i.localKey]);t[n]=e||[]}))},e.prototype.addEagerConstraintForMorphMany=function(t,e,n){t.whereFk(this.type,n).whereFk(this.id,this.getKeys(e,this.localKey))},e}(fe),Oe=function(t){function e(e,n,r,i,o,a,u,s){var c=t.call(this,e)||this;return c.className="MorphToMany",c.pivotKey="pivot",c.related=c.model.relation(n),c.pivot=c.model.relation(r),c.relatedId=i,c.id=o,c.type=a,c.parentKey=u,c.relatedKey=s,c}return Gt(e,t),e.prototype.as=function(t){return this.pivotKey=t,this},e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this,o=this.getRelation(t,this.related.entity,r),a=t.newQuery(this.pivot.entity);this.addEagerConstraintForPivot(a,e,t.entity);var u=a.get();this.addEagerConstraintForRelated(o,u);var s=this.mapPivotRelations(u,o);e.forEach((function(t){var e=s[t[i.parentKey]];t[n]=e||[]}))},e.prototype.addEagerConstraintForPivot=function(t,e,n){t.whereFk(this.type,n).whereFk(this.id,this.getKeys(e,this.parentKey))},e.prototype.addEagerConstraintForRelated=function(t,e){t.whereFk(this.relatedKey,this.getKeys(e,this.relatedId))},e.prototype.mapPivotRelations=function(t,e){var n=this,r=this.mapManyRelations(e.get(),this.relatedKey);return e.orders.length?this.mapRelationsByOrders(t,r,this.id,this.relatedId):t.reduce((function(t,e){var i=e[n.id];t[i]||(t[i]=[]);var o=r.get(e[n.relatedId]);return void 0===o||0===o.length||(t[i]=t[i].concat(o.map((function(t){return t[n.pivotKey]=e,t})))),t}),{})},e.prototype.createPivots=function(t,e,n){var r=this;return ne.forOwn(e[t.entity],(function(i){var o=t.query().newQuery(r.pivot.entity).where(r.id,i[r.parentKey]).where(r.type,t.entity).get(),a=(i[n]||[]).filter((function(t){return!o.includes(t)}));ne.isArray(a)&&0!==a.length&&r.createPivotRecord(t,e,i,a)})),e},e.prototype.createPivotRecord=function(t,e,n,r){var i=this;r.forEach((function(r){var o,a,u=n[i.parentKey],s=e[i.related.entity][r][i.relatedKey],c=u+"_"+r+"_"+t.entity,h=e[i.related.entity][r][i.pivotKey]||{};e[i.pivot.entity]=qt(qt({},e[i.pivot.entity]),((o={})[c]=qt(qt({},h),((a={$id:c})[i.relatedId]=s,a[i.id]=u,a[i.type]=t.entity,a)),o))}))},e}(fe),Ke=function(t){function e(e,n,r,i,o,a,u,s){var c=t.call(this,e)||this;return c.className="MorphedByMany",c.pivotKey="pivot",c.related=c.model.relation(n),c.pivot=c.model.relation(r),c.relatedId=i,c.id=o,c.type=a,c.parentKey=u,c.relatedKey=s,c}return Gt(e,t),e.prototype.as=function(t){return this.pivotKey=t,this},e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this,o=this.getRelation(t,this.related.entity,r),a=t.newQuery(this.pivot.entity);this.addEagerConstraintForPivot(a,e,this.related.entity);var u=a.get();this.addEagerConstraintForRelated(o,u);var s=this.mapPivotRelations(u,o);e.forEach((function(t){var e=s[t[i.parentKey]];t[n]=e||[]}))},e.prototype.addEagerConstraintForPivot=function(t,e,n){t.whereFk(this.type,n).whereFk(this.relatedId,this.getKeys(e,this.parentKey))},e.prototype.addEagerConstraintForRelated=function(t,e){t.whereFk(this.relatedKey,this.getKeys(e,this.id))},e.prototype.mapPivotRelations=function(t,e){var n=this,r=this.mapManyRelations(e.get(),this.relatedKey);return e.orders.length?this.mapRelationsByOrders(t,r,this.relatedId,this.id):t.reduce((function(t,e){var i=e[n.relatedId];t[i]||(t[i]=[]);var o=r.get(e[n.id]);return void 0===o||0===o.length||(t[i]=t[i].concat(o.map((function(t){return t[n.pivotKey]=e,t})))),t}),{})},e.prototype.createPivots=function(t,e,n){var r=this;return ne.forOwn(e[t.entity],(function(t){var i=t[n];ne.isArray(i)&&r.createPivotRecord(e,t,i)})),e},e.prototype.createPivotRecord=function(t,e,n){var r=this;n.forEach((function(n){var i,o,a=e[r.parentKey],u=n+"_"+a+"_"+r.related.entity,s=t[r.related.entity][n][r.pivotKey]||{};t[r.pivot.entity]=qt(qt({},t[r.pivot.entity]),((i={})[u]=qt(qt({},s),((o={$id:u})[r.relatedId]=a,o[r.id]=r.model.getIdFromRecord(t[r.related.entity][n]),o[r.type]=r.related.entity,o)),i))}))},e}(fe),Re={relations:!0};function Me(t,e){void 0===e&&(e={}),e=qt(qt({},Re),e);var n={},r=t.$fields();for(var i in r){var o=r[i],a=t[i];o instanceof fe?n[i]=e.relations?Ie(a):$e(a):n[i]=ke(t[i])}return n}function ke(t){return null===t?null:Xt(t)?t.map((function(t){return ke(t)})):"object"==typeof t?function(t){var e={};for(var n in t)e[n]=ke(t[n]);return e}(t):t}function Ie(t){return null===t?null:Xt(t)?t.map((function(t){return t.$toJson()})):t.$toJson()}function $e(t){return Xt(t)?[]:null}var Fe=function(){function t(t){this.$id=null,this.$fill(t)}return t.fields=function(){return{}},t.attr=function(t,e){return new ae(this,t,e)},t.string=function(t,e){return new ue(this,t,e)},t.number=function(t,e){return new se(this,t,e)},t.boolean=function(t,e){return new ce(this,t,e)},t.uid=function(t){return new he(this,t)},t.increment=function(){return this.uid()},t.hasOne=function(t,e,n){return new le(this,t,e,this.localKey(n))},t.belongsTo=function(t,e,n){return new de(this,t,e,this.relation(t).localKey(n))},t.hasMany=function(t,e,n){return new pe(this,t,e,this.localKey(n))},t.hasManyBy=function(t,e,n){return new ye(this,t,e,this.relation(t).localKey(n))},t.hasManyThrough=function(t,e,n,r,i,o){return new ve(this,t,e,n,r,this.localKey(i),this.relation(e).localKey(o))},t.belongsToMany=function(t,e,n,r,i,o){return new me(this,t,e,n,r,this.localKey(i),this.relation(t).localKey(o))},t.morphTo=function(t,e){return new ge(this,t,e)},t.morphOne=function(t,e,n,r){return new be(this,t,e,n,this.localKey(r))},t.morphMany=function(t,e,n,r){return new we(this,t,e,n,this.localKey(r))},t.morphToMany=function(t,e,n,r,i,o,a){return new Oe(this,t,e,n,r,i,this.localKey(o),this.relation(t).localKey(a))},t.morphedByMany=function(t,e,n,r,i,o,a){return new Ke(this,t,e,n,r,i,this.localKey(o),this.relation(t).localKey(a))},t.mutators=function(){return{}},t.types=function(){return{}},t.store=function(){return Wt.store},t.database=function(){return this.store().$db()},t.namespace=function(t){return this.database().namespace+"/"+this.entity+"/"+t},t.getters=function(t){return this.store().getters[this.namespace(t)]},t.dispatch=function(t,e){return this.store().dispatch(this.namespace(t),e)},t.commit=function(t){this.store().commit(this.database().namespace+"/$mutate",{entity:this.entity,callback:t})},t.getFields=function(){return this.cachedFields||(this.cachedFields={}),this.cachedFields[this.entity]||(this.cachedFields[this.entity]=this.fields()),this.cachedFields[this.entity]},t.all=function(){return this.getters("all")()},t.find=function(t){return this.getters("find")(t)},t.findIn=function(t){return this.getters("findIn")(t)},t.query=function(){return this.getters("query")()},t.exists=function(){return this.query().exists()},t.new=function(){return this.dispatch("new")},t.create=function(t){return this.dispatch("create",t)},t.insert=function(t){return this.dispatch("insert",t)},t.update=function(t){return this.dispatch("update",t)},t.insertOrUpdate=function(t){return this.dispatch("insertOrUpdate",t)},t.delete=function(t){return this.dispatch("delete",t)},t.deleteAll=function(){return this.dispatch("deleteAll")},t.isPrimaryKey=function(t){return ne.isArray(this.primaryKey)?this.primaryKey.includes(t):this.primaryKey===t},t.isCompositePrimaryKey=function(){return ne.isArray(this.primaryKey)},t.getIdFromRecord=function(t){var e=this,n=this.primaryKey;if("string"==typeof n)return this.getIdFromValue(t[n]);var r=n.reduce((function(n,r){var i=e.getIdFromValue(t[r]);return null!==i&&n.push(i),n}),[]);return r.length===n.length?r:null},t.getIdFromValue=function(t){return"string"==typeof t&&""!==t||"number"==typeof t?t:null},t.getIndexIdFromRecord=function(t){var e=this.getIdFromRecord(t);return null===e?null:ne.isArray(e)?JSON.stringify(e):String(e)},t.localKey=function(t){return t||("string"==typeof this.primaryKey?this.primaryKey:"id")},t.getModelFromRecord=function(t){return t instanceof this?t.$self():this.getTypeModel(t[this.typeKey])},t.relation=function(t){return"string"!=typeof t?t:this.database().model(t)},t.pivotFields=function(){var t=[];return ne.forOwn(this.getFields(),(function(e,n){var r;(e instanceof me||e instanceof Oe||e instanceof Ke)&&t.push(((r={})[n]=e,r))})),t},t.hasPivotFields=function(){return this.pivotFields().length>0},t.hasTypes=function(){return Object.keys(this.types()).length>0},t.getTypeModel=function(t){var e=this.types()[t];return e||null},t.getTypeKeyValueFromModel=function(t){var e=t||this,n=this.types();for(var r in n)if(n[r].entity===e.entity)return r;return null},t.findRelationInSubTypes=function(t){var e=this.types();for(var n in e){var r=e[n].getFields();for(var i in r)if(i===t&&r[i]instanceof fe)return r[i]}return null},t.hydrate=function(t){return new this(t).$getAttributes()},t.prototype.$self=function(){return this.constructor},t.prototype.$primaryKey=function(){return this.$self().primaryKey},t.prototype.$fields=function(){return this.$self().getFields()},t.prototype.$setIndexId=function(t){return this.$id=t,this},t.prototype.$store=function(){return this.$self().store()},t.prototype.$namespace=function(t){return this.$self().namespace(t)},t.prototype.$getters=function(t){return this.$self().getters(t)},t.prototype.$dispatch=function(t,e){return Qt(this,void 0,void 0,(function(){return Jt(this,(function(n){return[2,this.$self().dispatch(t,e)]}))}))},t.prototype.$all=function(){return this.$getters("all")()},t.prototype.$find=function(t){return this.$getters("find")(t)},t.prototype.$findIn=function(t){return this.$getters("findIn")(t)},t.prototype.$query=function(){return this.$getters("query")()},t.prototype.$create=function(t){return Qt(this,void 0,void 0,(function(){return Jt(this,(function(e){return[2,this.$dispatch("create",t)]}))}))},t.prototype.$insert=function(t){return Qt(this,void 0,void 0,(function(){return Jt(this,(function(e){return[2,this.$dispatch("insert",t)]}))}))},t.prototype.$update=function(t){return Qt(this,void 0,void 0,(function(){return Jt(this,(function(e){return ne.isArray(t)||void 0!==t.where?[2,this.$dispatch("update",t)]:null===this.$self().getIndexIdFromRecord(t)?[2,this.$dispatch("update",{where:this.$self().getIdFromRecord(this),data:t})]:[2,this.$dispatch("update",t)]}))}))},t.prototype.$insertOrUpdate=function(t){return Qt(this,void 0,void 0,(function(){return Jt(this,(function(e){return[2,this.$dispatch("insertOrUpdate",t)]}))}))},t.prototype.$save=function(){return Qt(this,void 0,void 0,(function(){var t,e,n,r=this;return Jt(this,(function(i){switch(i.label){case 0:return t=this.$self().getFields(),e=Object.keys(t).reduce((function(e,n){return t[n]instanceof oe&&(e[n]=r[n]),e}),{}),[4,this.$dispatch("insertOrUpdate",{data:e})];case 1:return n=i.sent(),this.$fill(n[this.$self().entity][0]),[2,this]}}))}))},t.prototype.$delete=function(){return Qt(this,void 0,void 0,(function(){var t,e=this;return Jt(this,(function(n){return t=this.$primaryKey(),ne.isArray(t)?[2,this.$dispatch("delete",(function(n){return t.every((function(t){return n[t]===e[t]}))}))]:[2,this.$dispatch("delete",this[t])]}))}))},t.prototype.$deleteAll=function(){return Qt(this,void 0,void 0,(function(){return Jt(this,(function(t){return[2,this.$dispatch("deleteAll")]}))}))},t.prototype.$fill=function(t){void 0===t&&(t={});var e=this.$fields();for(var n in e){var r=e[n],i=t[n];this[n]=r.make(i,t,n)}void 0!==t.$id&&this.$setIndexId(t.$id)},t.prototype.$generateId=function(){return this.$generatePrimaryId().$generateIndexId()},t.prototype.$generatePrimaryId=function(){var t=this,e=this.$self().primaryKey;return(ne.isArray(e)?e:[e]).forEach((function(e){void 0!==t[e]&&null!==t[e]||(t[e]=re.make())})),this},t.prototype.$generateIndexId=function(){return this.$setIndexId(this.$getIndexIdFromAttributes())},t.prototype.$getIndexIdFromAttributes=function(){return this.$self().getIndexIdFromRecord(this)},t.prototype.$getAttributes=function(){return(e=Me(t=this,{relations:!1})).$id=t.$id,e;var t,e},t.prototype.$toJson=function(){return Me(this)},t.primaryKey="id",t.typeKey="type",t.state={},t}(),Se={query:function(t,e,n,r){return function(){return r[t.$connection+"/query"](t.$name)}},all:function(t,e,n,r){return function(){return r[t.$connection+"/all"](t.$name)}},find:function(t,e,n,r){return function(e){return r[t.$connection+"/find"](t.$name,e)}},findIn:function(t,e,n,r){return function(e){return r[t.$connection+"/findIn"](t.$name,e)}}};var Ee={new:function(t){return Qt(this,void 0,void 0,(function(){var e,n;return Jt(this,(function(r){return e=t.state,n=e.$name,[2,t.dispatch(e.$connection+"/new",{entity:n},{root:!0})]}))}))},create:function(t,e){return Qt(this,void 0,void 0,(function(){var n,r;return Jt(this,(function(i){return n=t.state,r=n.$name,[2,t.dispatch(n.$connection+"/create",qt(qt({},e),{entity:r}),{root:!0})]}))}))},insert:function(t,e){return Qt(this,void 0,void 0,(function(){var n,r;return Jt(this,(function(i){return n=t.state,r=n.$name,[2,t.dispatch(n.$connection+"/insert",qt(qt({},e),{entity:r}),{root:!0})]}))}))},update:function(t,e){return Qt(this,void 0,void 0,(function(){var n,r;return Jt(this,(function(i){return n=t.state,r=n.$name,Xt(e)||void 0===e.data?[2,t.dispatch(n.$connection+"/update",{entity:r,data:e},{root:!0})]:[2,t.dispatch(n.$connection+"/update",qt({entity:r},e),{root:!0})]}))}))},insertOrUpdate:function(t,e){return Qt(this,void 0,void 0,(function(){var n,r;return Jt(this,(function(i){return n=t.state,r=n.$name,[2,t.dispatch(n.$connection+"/insertOrUpdate",qt({entity:r},e),{root:!0})]}))}))},delete:function(t,e){return Qt(this,void 0,void 0,(function(){var n,r,i;return Jt(this,(function(o){return n=t.state,r=n.$name,i=e,[2,t.dispatch(n.$connection+"/delete",{entity:r,where:i},{root:!0})]}))}))},deleteAll:function(t){return Qt(this,void 0,void 0,(function(){var e,n;return Jt(this,(function(r){return e=t.state,n=e.$name,[2,t.dispatch(e.$connection+"/deleteAll",{entity:n},{root:!0})]}))}))}};function Ae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xe(t,e,n){return e&&Ae(t.prototype,e),n&&Ae(t,n),t}function je(){return(je=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Pe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Ce(t){return!(!t||"function"!=typeof t.hasOwnProperty||!(t.hasOwnProperty("__ownerID")||t._map&&t._map.hasOwnProperty("__ownerID")))}function Be(t,e,n){return Object.keys(t).reduce((function(e,r){var i=""+r;return e.has(i)?e.set(i,n(e.get(i),t[i])):e}),e)}var _e=function(){function t(t,e,n){if(void 0===e&&(e={}),void 0===n&&(n={}),!t||"string"!=typeof t)throw new Error("Expected a string key for Entity, but found "+t+".");var r=n,i=r.idAttribute,o=void 0===i?"id":i,a=r.mergeStrategy,u=void 0===a?function(t,e){return je({},t,e)}:a,s=r.processStrategy,c=void 0===s?function(t){return je({},t)}:s,h=r.fallbackStrategy,f=void 0===h?function(t,e){}:h;this._key=t,this._getId="function"==typeof o?o:function(t){return function(e){return Ce(e)?e.get(t):e[t]}}(o),this._idAttribute=o,this._mergeStrategy=u,this._processStrategy=c,this._fallbackStrategy=f,this.define(e)}var e=t.prototype;return e.define=function(t){this.schema=Object.keys(t).reduce((function(e,n){var r,i=t[n];return je({},e,((r={})[n]=i,r))}),this.schema||{})},e.getId=function(t,e,n){return this._getId(t,e,n)},e.merge=function(t,e){return this._mergeStrategy(t,e)},e.fallback=function(t,e){return this._fallbackStrategy(t,e)},e.normalize=function(t,e,n,r,i,o){var a=this,u=this.getId(t,e,n),s=this.key;if(s in o||(o[s]={}),u in o[s]||(o[s][u]=[]),o[s][u].some((function(e){return e===t})))return u;o[s][u].push(t);var c=this._processStrategy(t,e,n);return Object.keys(this.schema).forEach((function(e){if(c.hasOwnProperty(e)&&"object"==typeof c[e]){var n=a.schema[e],u="function"==typeof n?n(t):n;c[e]=r(c[e],c,e,u,i,o)}})),i(this,c,t,e,n),u},e.denormalize=function(t,e){var n=this;return Ce(t)?Be(this.schema,t,e):(Object.keys(this.schema).forEach((function(r){if(t.hasOwnProperty(r)){var i=n.schema[r];t[r]=e(t[r],i)}})),t)},xe(t,[{key:"key",get:function(){return this._key}},{key:"idAttribute",get:function(){return this._idAttribute}}]),t}(),Te=function(){function t(t,e){e&&(this._schemaAttribute="string"==typeof e?function(t){return t[e]}:e),this.define(t)}var e=t.prototype;return e.define=function(t){this.schema=t},e.getSchemaAttribute=function(t,e,n){return!this.isSingleSchema&&this._schemaAttribute(t,e,n)},e.inferSchema=function(t,e,n){if(this.isSingleSchema)return this.schema;var r=this.getSchemaAttribute(t,e,n);return this.schema[r]},e.normalizeValue=function(t,e,n,r,i,o){var a=this.inferSchema(t,e,n);if(!a)return t;var u=r(t,e,n,a,i,o);return this.isSingleSchema||null==u?u:{id:u,schema:this.getSchemaAttribute(t,e,n)}},e.denormalizeValue=function(t,e){var n=Ce(t)?t.get("schema"):t.schema;return this.isSingleSchema||n?e((this.isSingleSchema?void 0:Ce(t)?t.get("id"):t.id)||t,this.isSingleSchema?this.schema:this.schema[n]):t},xe(t,[{key:"isSingleSchema",get:function(){return!this._schemaAttribute}}]),t}(),He=function(t){function e(e,n){if(!n)throw new Error('Expected option "schemaAttribute" not found on UnionSchema.');return t.call(this,e,n)||this}Pe(e,t);var n=e.prototype;return n.normalize=function(t,e,n,r,i,o){return this.normalizeValue(t,e,n,r,i,o)},n.denormalize=function(t,e){return this.denormalizeValue(t,e)},e}(Te),Ne=function(t){function e(){return t.apply(this,arguments)||this}Pe(e,t);var n=e.prototype;return n.normalize=function(t,e,n,r,i,o){var a=this;return Object.keys(t).reduce((function(e,n,u){var s,c=t[n];return null!=c?je({},e,((s={})[n]=a.normalizeValue(c,t,n,r,i,o),s)):e}),{})},n.denormalize=function(t,e){var n=this;return Object.keys(t).reduce((function(r,i){var o,a=t[i];return je({},r,((o={})[i]=n.denormalizeValue(a,e),o))}),{})},e}(Te),Ue=function(t){return Array.isArray(t)?t:Object.keys(t).map((function(e){return t[e]}))},ze=function(t,e,n,r,i,o,a){return t=function(t){if(Array.isArray(t)&&t.length>1)throw new Error("Expected schema definition to be a single schema, but found "+t.length+".");return t[0]}(t),Ue(e).map((function(e,u){return i(e,n,r,t,o,a)}))},Ve=function(t){function e(){return t.apply(this,arguments)||this}Pe(e,t);var n=e.prototype;return n.normalize=function(t,e,n,r,i,o){var a=this;return Ue(t).map((function(t,u){return a.normalizeValue(t,e,n,r,i,o)})).filter((function(t){return null!=t}))},n.denormalize=function(t,e){var n=this;return t&&t.map?t.map((function(t){return n.denormalizeValue(t,e)})):t},e}(Te),De=function(t,e,n,r,i,o,a){var u=je({},e);return Object.keys(t).forEach((function(n){var r=t[n],s="function"==typeof r?r(e):r,c=i(e[n],e,n,s,o,a);null==c?delete u[n]:u[n]=c})),u},We=function(t,e,n){if(Ce(e))return Be(t,e,n);var r=je({},e);return Object.keys(t).forEach((function(e){null!=r[e]&&(r[e]=n(r[e],t[e]))})),r},Le=function t(e,n,r,i,o,a){return"object"==typeof e&&e?"object"!=typeof i||i.normalize&&"function"==typeof i.normalize?i.normalize(e,n,r,t,o,a):(Array.isArray(i)?ze:De)(i,e,n,r,t,o,a):e},Ge={Array:Ve,Entity:_e,Object:function(){function t(t){this.define(t)}var e=t.prototype;return e.define=function(t){this.schema=Object.keys(t).reduce((function(e,n){var r,i=t[n];return je({},e,((r={})[n]=i,r))}),this.schema||{})},e.normalize=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return De.apply(void 0,[this.schema].concat(e))},e.denormalize=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return We.apply(void 0,[this.schema].concat(e))},t}(),Union:He,Values:Ne},qe=function(){function t(){}return t.process=function(t,e){if(ne.isEmpty(e))return{};var n=t.database.schemas[t.model.entity];return function(t,e){if(!t||"object"!=typeof t)throw new Error('Unexpected input given to normalize. Expected type to be "object", found "'+(null===t?"null":typeof t)+'".');var n={},r=function(t){return function(e,n,r,i,o){var a=e.key,u=e.getId(r,i,o);a in t||(t[a]={});var s=t[a][u];t[a][u]=s?e.merge(s,n):n}}(n);return{entities:n,result:Le(t,t,null,e,r,{})}}(e,ne.isArray(e)?[n]:n).entities},t}(),Qe=function(){function t(){}return t.process=function(t,e){return Object.keys(e).forEach((function(n){var r=t.getModel(n);r.hasPivotFields()&&ne.forOwn(r.pivotFields(),(function(t){ne.forOwn(t,(function(t,n){t.createPivots(r,e,n)}))}))})),e},t}(),Je=function(){function t(){}return t.process=function(t,e){return ne.forOwn(e,(function(n,r){var i=t.getModel(r).fields();ne.forOwn(n,(function(t){ne.forOwn(t,(function(n,r){var o=i[r];o instanceof fe&&null!==n&&o.attach(n,t,e)}))}))})),e},t}(),Ye=function(){function t(){}return t.normalize=function(t,e){var n=qe.process(t,e);return n=Je.process(t,n),n=Qe.process(t,n)},t}(),Xe=function(){function t(){}return t.filter=function(t,e){var n=this;return 0===t.wheres.length?e:e.filter((function(e){return n.check(t,e)}))},t.check=function(t,e){var n=ne.groupBy(t.wheres,(function(t){return t.boolean})),r=this.getComparator(t,e),i=[];return n.and&&i.push(n.and.every(r)),n.or&&i.push(n.or.some(r)),-1!==i.indexOf(!0)},t.getComparator=function(t,e){var n=this;return function(r){if("function"==typeof r.field){var i=new on(t.store,t.entity),o=n.executeWhereClosure(i,e,r.field);if("boolean"==typeof o)return o;var a=i.get();return!ne.isEmpty(a.filter((function(t){return t.$id===e.$id})))}return"function"==typeof r.value?r.value(e[r.field]):ne.isArray(r.value)?-1!==r.value.indexOf(e[r.field]):e[r.field]===r.value}},t.executeWhereClosure=function(t,e,n){if(3!==n.length)return n(e,t);var r=new t.model(e);return n(e,t,r)},t}(),Ze=function(){function t(){}return t.filter=function(t,e){if(0===t.orders.length)return e;var n=t.orders.map((function(t){return t.key})),r=t.orders.map((function(t){return t.direction}));return ne.orderBy(e,n,r)},t}(),tn=function(){function t(){}return t.filter=function(t,e){return e.slice(t.offsetNumber,t.offsetNumber+t.limitNumber)},t}(),en=function(){function t(){}return t.where=function(t,e){return Xe.filter(t,e)},t.orderBy=function(t,e){return Ze.filter(t,e)},t.limit=function(t,e){return tn.filter(t,e)},t}(),nn=function(){function t(){}return t.with=function(t,e,n){var r=this;"*"!==e?Xt(e)?e.forEach((function(e){return r.with(t,e,n)})):this.parseWithRelations(t,e.split("."),n):this.withAll(t,n)},t.withAll=function(t,e){var n=t.model.getFields();for(var r in n)n[r]instanceof fe&&this.with(t,r,e)},t.withAllRecursive=function(t,e){this.withAll(t,(function(t){e>0&&t.withAllRecursive(e-1)}))},t.setEagerLoad=function(t,e,n){void 0===n&&(n=null),t.load[e]||(t.load[e]=[]),n&&t.load[e].push(n)},t.parseWithRelations=function(t,e,n){var r=this,i=e[0];i.split("|").forEach((function(i){1!==e.length?r.setEagerLoad(t,i):r.setEagerLoad(t,i,n)})),1!==e.length&&(e.shift(),this.addNestedWiths(t,i,e,n))},t.addNestedWiths=function(t,e,n,r){this.setEagerLoad(t,e,(function(t){t.with(n.join("."),r)}))},t.eagerLoadRelations=function(t,e){var n=t.model.getFields();for(var r in t.load){var i=t.load[r],o=n[r];if(o instanceof fe)o.load(t,e,r,i);else if(t.model.hasTypes()){var a=t.model.findRelationInSubTypes(r);null!==a&&a.load(t,e,r,i)}}},t}(),rn=function(){function t(){}return t.has=function(t,e,n,r){this.setHas(t,e,"exists",n,r)},t.hasNot=function(t,e,n,r){this.setHas(t,e,"doesntExist",n,r)},t.whereHas=function(t,e,n){this.setHas(t,e,"exists",void 0,void 0,n)},t.whereHasNot=function(t,e,n){this.setHas(t,e,"doesntExist",void 0,void 0,n)},t.setHas=function(t,e,n,r,i,o){void 0===r&&(r=">="),void 0===i&&(i=1),void 0===o&&(o=null),"number"!=typeof r?t.have.push({relation:e,type:n,operator:r,count:i,constraint:o}):t.have.push({relation:e,type:n,operator:">=",count:r,constraint:o})},t.applyConstraints=function(t){if(0!==t.have.length){var e=t.newQuery();this.addHasWhereConstraints(t,e),this.addHasConstraints(t,e.get())}},t.addHasWhereConstraints=function(t,e){t.have.forEach((function(t){e.with(t.relation,t.constraint)}))},t.addHasConstraints=function(t,e){var n=this.getComparators(t),r=[];e.forEach((function(t){n.every((function(e){return e(t)}))&&r.push(t.$self().getIdFromRecord(t))})),t.whereIdIn(r)},t.getComparators=function(t){var e=this;return t.have.map((function(t){return e.getComparator(t)}))},t.getComparator=function(t){var e=this,n=this.getCountComparator(t.operator);return function(r){var i=e.getRelationshipCount(r[t.relation]),o=n(i,t.count);return"exists"===t.type?o:!o}},t.getRelationshipCount=function(t){return Xt(t)?t.length:t?1:0},t.getCountComparator=function(t){switch(t){case"=":return function(t,e){return t===e};case">":return function(t,e){return t>e};case">=":return function(t,e){return t>=e};case"<":return function(t,e){return t>0&&t<e};case"<=":return function(t,e){return t>0&&t<=e};default:return function(t,e){return t===e}}},t}(),on=function(){function t(t,e){this.appliedOnBase=!0,this.idFilter=null,this.cancelIdFilter=!1,this.joinedIdFilter=null,this.wheres=[],this.have=[],this.orders=[],this.offsetNumber=0,this.limitNumber=Math.pow(2,53)-1,this.load={},this.store=t,this.database=t.$db(),this.model=this.getModel(e),this.baseModel=this.getBaseModel(e),this.entity=e,this.baseEntity=this.baseModel.entity,this.rootState=this.database.getState(),this.state=this.rootState[this.baseEntity],this.appliedOnBase=this.baseEntity===this.entity}return t.deleteAll=function(t){var e=t.$db(),n=e.models();for(var r in n){e.getState()[r]&&new this(t,r).deleteAll()}},t.on=function(t,e){var n=++this.lastHookId;return this.hooks[t]||(this.hooks[t]=[]),this.hooks[t].push({id:n,callback:e}),n},t.off=function(t){var e=this;return Object.keys(this.hooks).some((function(n){var r=e.hooks[n],i=r.findIndex((function(e){return e.id===t}));return-1!==i&&(r.splice(i,1),!0)}))},t.prototype.self=function(){return this.constructor},t.prototype.newQuery=function(e){return e=e||this.entity,new t(this.store,e)},t.prototype.getModel=function(t){var e=t||this.entity;return this.database.model(e)},t.prototype.getModels=function(){return this.database.models()},t.prototype.getBaseModel=function(t){return this.database.baseModel(t)},t.prototype.all=function(){return this.get()},t.prototype.find=function(t){var e=this.state.data[this.normalizeIndexId(t)];return e?this.item(this.hydrate(e)):null},t.prototype.findIn=function(t){var e=this;if(!ne.isArray(t))return[];var n=t.reduce((function(t,n){var r=e.state.data[e.normalizeIndexId(n)];return r?(t.push(e.hydrate(r)),t):t}),[]);return this.collect(n)},t.prototype.get=function(){var t=this.select();return this.collect(t)},t.prototype.first=function(){var t=this.select();return 0===t.length?null:this.item(this.hydrate(t[0]))},t.prototype.last=function(){var t=this.select();return 0===t.length?null:this.item(this.hydrate(t[t.length-1]))},t.prototype.exists=function(){return this.select().length>0},t.prototype.where=function(t,e){return this.isIdfilterable(t)&&this.setIdFilter(e),this.wheres.push({field:t,value:e,boolean:"and"}),this},t.prototype.orWhere=function(t,e){return this.cancelIdFilter=!0,this.wheres.push({field:t,value:e,boolean:"or"}),this},t.prototype.whereId=function(t){return this.model.isCompositePrimaryKey()?this.where("$id",this.normalizeIndexId(t)):this.where(this.model.primaryKey,t)},t.prototype.whereIdIn=function(t){var e=this;if(this.model.isCompositePrimaryKey()){var n=t.reduce((function(t,n){return Yt(t,[e.normalizeIndexId(n)])}),[]);return this.where("$id",n)}return this.where(this.model.primaryKey,t)},t.prototype.whereFk=function(t,e){var n=ne.isArray(e)?e:[e];return t===this.model.primaryKey?(this.setJoinedIdFilter(n),this):(this.where(t,n),this)},t.prototype.normalizeIndexId=function(t){if(this.model.isCompositePrimaryKey()){if(!ne.isArray(t))throw new Error("[Vuex ORM] Entity `"+this.entity+"` is configured with a composite primary key and expects an array value but instead received: "+JSON.stringify(t));return JSON.stringify(t)}if(ne.isArray(t))throw new Error("[Vuex ORM] Entity `"+this.entity+"` expects a single value but instead received: "+JSON.stringify(t));return t},t.prototype.isIdfilterable=function(t){return(t===this.model.primaryKey||"$id"===t)&&!this.cancelIdFilter},t.prototype.setIdFilter=function(t){var e=this,n=ne.isArray(t)?t:[t];null!==this.idFilter?this.idFilter=new Set(n.filter((function(t){return e.idFilter.has(t)}))):this.idFilter=new Set(n)},t.prototype.setJoinedIdFilter=function(t){var e=this;null!==this.joinedIdFilter?this.joinedIdFilter=new Set(t.filter((function(t){return e.joinedIdFilter.has(t)}))):this.joinedIdFilter=new Set(t)},t.prototype.orderBy=function(t,e){return void 0===e&&(e="asc"),this.orders.push({key:t,direction:e}),this},t.prototype.offset=function(t){return this.offsetNumber=t,this},t.prototype.limit=function(t){return this.limitNumber=t,this},t.prototype.with=function(t,e){return void 0===e&&(e=null),nn.with(this,t,e),this},t.prototype.withAll=function(t){return void 0===t&&(t=null),nn.withAll(this,t),this},t.prototype.withAllRecursive=function(t){return void 0===t&&(t=3),nn.withAllRecursive(this,t),this},t.prototype.has=function(t,e,n){return rn.has(this,t,e,n),this},t.prototype.hasNot=function(t,e,n){return rn.hasNot(this,t,e,n),this},t.prototype.whereHas=function(t,e){return rn.whereHas(this,t,e),this},t.prototype.whereHasNot=function(t,e){return rn.whereHasNot(this,t,e),this},t.prototype.records=function(){var t=this;return this.finalizeIdFilter(),this.getIdsToLookup().reduce((function(e,n){var r=t.state.data[n];if(!r)return e;var i=t.hydrate(r);return t.appliedOnBase||t.model.entity===i.$self().entity?(e.push(i),e):e}),[])},t.prototype.finalizeIdFilter=function(){this.cancelIdFilter&&null!==this.idFilter&&(this.where(this.model.isCompositePrimaryKey()?"$id":this.model.primaryKey,Array.from(this.idFilter.values())),this.idFilter=null)},t.prototype.getIdsToLookup=function(){var t=this;return this.idFilter&&this.joinedIdFilter?Array.from(this.idFilter.values()).filter((function(e){return t.joinedIdFilter.has(e)})):this.idFilter||this.joinedIdFilter?Array.from((this.idFilter||this.joinedIdFilter).values()):Object.keys(this.state.data)},t.prototype.select=function(){rn.applyConstraints(this);var t=this.records();return t=this.executeSelectHook("beforeSelect",t),t=this.filterWhere(t),t=this.executeSelectHook("afterWhere",t),t=this.filterOrderBy(t),t=this.executeSelectHook("afterOrderBy",t),t=this.filterLimit(t),t=this.executeSelectHook("afterLimit",t)},t.prototype.filterWhere=function(t){return en.where(this,t)},t.prototype.filterOrderBy=function(t){return en.orderBy(this,t)},t.prototype.filterLimit=function(t){return en.limit(this,t)},t.prototype.count=function(){return this.get().length},t.prototype.max=function(t){var e=this.get().reduce((function(e,n){return"number"==typeof n[t]&&e.push(n[t]),e}),[]);return 0===e.length?0:Math.max.apply(Math,e)},t.prototype.min=function(t){var e=this.get().reduce((function(e,n){return"number"==typeof n[t]&&e.push(n[t]),e}),[]);return 0===e.length?0:Math.min.apply(Math,e)},t.prototype.sum=function(t){return this.get().reduce((function(e,n){return"number"==typeof n[t]&&(e+=n[t]),e}),0)},t.prototype.item=function(t){return Object.keys(this.load).length>0&&nn.eagerLoadRelations(this,[t]),t},t.prototype.collect=function(t){var e=this;return t.length<1?[]:(Object.keys(this.load).length>0&&(t=t.map((function(t){return new(e.model.getModelFromRecord(t))(t)})),nn.eagerLoadRelations(this,t)),t)},t.prototype.new=function(){var t=(new this.model).$generateId();return this.commitInsert(t.$getAttributes()),t},t.prototype.create=function(t,e){return this.persist("create",t,e)},t.prototype.createRecords=function(t){return this.deleteAll(),this.insertRecords(t)},t.prototype.insert=function(t,e){return this.persist("insert",t,e)},t.prototype.insertRecords=function(t){var e=this.mapHydrateRecords(t);return e=this.executeMutationHooks("beforeCreate",e),this.commitInsertRecords(this.convertCollectionToRecords(e)),this.executeMutationHooks("afterCreate",e),e},t.prototype.update=function(t,e,n){if(ne.isArray(t))return this.persist("update",t,n);if("function"==typeof t){if(!e)throw new Error("You must specify `where` to update records by specifying `data` as a closure.");return"function"==typeof e?this.updateByCondition(t,e):this.updateById(t,e)}if("function"==typeof e)return this.updateByCondition(t,e);if(!e)return this.persist("update",t,n);if(this.model.isCompositePrimaryKey()&&!ne.isArray(e))throw new Error("[Vuex ORM] You can't specify `where` value as `string` or `number` when you have a composite key defined in your model. Please include composite keys to the `data` fields.");return this.updateById(t,e)},t.prototype.updateRecords=function(t){var e=this.hydrateRecordsByMerging(t);return this.performUpdate(e)},t.prototype.updateById=function(t,e){var n;e="number"==typeof e?e.toString():this.normalizeIndexId(e);var r=this.state.data[e];if(!r)return null;var i=this.hydrate(r),o=((n={})[e]=this.processUpdate(t,i),n);return this.performUpdate(o),o[e]},t.prototype.updateByCondition=function(t,e){var n=this,r=Object.keys(this.state.data).reduce((function(r,i){var o=n.hydrate(n.state.data[i]);return e(o)?(r[i]=n.processUpdate(t,o),r):r}),{});return this.performUpdate(r)},t.prototype.processUpdate=function(t,e){return"function"==typeof t?(t(e),e):e.constructor!==this.model&&e instanceof Fe?this.hydrate(qt(qt({},e),t),e.constructor):this.hydrate(qt(qt({},e),t))},t.prototype.performUpdate=function(t){var e=this;t=this.updateIndexes(t);var n=this.buildHooks("beforeUpdate"),r=this.buildHooks("afterUpdate"),i=[],o=function(o){var u=t[o];if(n.some((function(t){return!1===t(u,null,e.entity)})))return"continue";a.commitInsert(u.$getAttributes()),r.forEach((function(t){t(u,null,e.entity)})),i.push(u)},a=this;for(var u in t)o(u);return i},t.prototype.updateIndexes=function(t){var e=this;return Object.keys(t).reduce((function(t,n){var r=t[n],i=String(e.model.getIndexIdFromRecord(r));return n!==i&&(r.$id=i,t[i]=r,delete t[n]),t}),t)},t.prototype.insertOrUpdate=function(t,e){return this.persist("insertOrUpdate",t,e)},t.prototype.insertOrUpdateRecords=function(t){var e=this,n={},r={};return Object.keys(t).forEach((function(i){var o=t[i];e.state.data[i]?r[i]=o:n[i]=o})),Yt(this.insertRecords(n),this.updateRecords(r))},t.prototype.persist=function(t,e,n){var r=this,i=ne.cloneDeep(e),o=this.normalize(i);return ne.isEmpty(o)?("create"===t&&this.emptyState(),{}):Object.entries(o).reduce((function(e,i){var o=i[0],a=i[1],u=r.newQuery(o),s=r.getPersistMethod(o,n,t),c=u.persistRecords(s,a);return c.length>0&&(e[o]=c),e}),{})},t.prototype.persistRecords=function(t,e){switch(t){case"create":return this.createRecords(e);case"insert":return this.insertRecords(e);case"update":return this.updateRecords(e);case"insertOrUpdate":return this.insertOrUpdateRecords(e)}},t.prototype.getPersistMethod=function(t,e,n){return e.create&&e.create.includes(t)?"create":e.insert&&e.insert.includes(t)?"insert":e.update&&e.update.includes(t)?"update":e.insertOrUpdate&&e.insertOrUpdate.includes(t)?"insertOrUpdate":n},t.prototype.delete=function(t){return"function"==typeof t?this.deleteByCondition(t):this.deleteById(t)},t.prototype.deleteAll=function(){var t=this;return this.appliedOnBase?this.deleteByCondition((function(){return!0})):this.deleteByCondition((function(e){return e.$self().entity===t.model.entity}))},t.prototype.deleteById=function(t){var e=this.find(t);return e?this.deleteByCondition((function(t){return t.$id===e.$id}))[0]:null},t.prototype.deleteByCondition=function(t){var e=this.mapHydrateAndFilterRecords(this.state.data,t);return 0===(e=this.executeMutationHooks("beforeDelete",e)).length?[]:(this.commitDelete(e.map((function(t){return t.$id}))),this.executeMutationHooks("afterDelete",e),e)},t.prototype.commit=function(t,e){this.store.commit(this.database.namespace+"/"+t,qt({entity:this.baseEntity},e))},t.prototype.commitInsert=function(t){this.commit("insert",{record:t})},t.prototype.commitInsertRecords=function(t){this.commit("insertRecords",{records:t})},t.prototype.commitDelete=function(t){this.commit("delete",{id:t})},t.prototype.normalize=function(t){return Ye.normalize(this,t)},t.prototype.hydrate=function(t,e){var n;if(e)return new e(t);var r=this.model.getModelFromRecord(t);if(null!==r)return new r(t);if(!this.appliedOnBase&&void 0===t[this.model.typeKey]){var i=this.model.getTypeKeyValueFromModel();return t=qt(qt({},t),((n={})[this.model.typeKey]=i,n)),new this.model(t)}return new(this.getBaseModel(this.entity))(t)},t.prototype.hydrateRecordsByMerging=function(t){var e=this;return Object.keys(t).reduce((function(n,r){var i=e.state.data[r];if(!i)return n;var o=t[r],a=e.model.getModelFromRecord(i);return null===a?(n[r]=e.hydrate(qt(qt({},i),o)),n):(n[r]=e.hydrate(qt(qt({},i),o),a),n)}),{})},t.prototype.mapHydrateRecords=function(t){var e=this;return ne.map(t,(function(t){return e.hydrate(t)}))},t.prototype.mapHydrateAndFilterRecords=function(t,e){var n=[];for(var r in t){var i=this.hydrate(t[r]);e(i)&&n.push(i)}return n},t.prototype.convertCollectionToRecords=function(t){return t.reduce((function(t,e){return t[e.$id]=e.$getAttributes(),t}),{})},t.prototype.emptyState=function(){this.deleteAll()},t.prototype.buildHooks=function(t){var e=this.getGlobalHookAsArray(t),n=this.model[t];return n&&e.push(n.bind(this.model)),e},t.prototype.getGlobalHookAsArray=function(t){var e=this,n=this.self().hooks[t];return n?n.map((function(t){return t.callback.bind(e)})):[]},t.prototype.executeMutationHooks=function(t,e){var n=this,r=this.buildHooks(t);return 0===r.length?e:e.filter((function(t){return!r.some((function(e){return!1===e(t,null,n.entity)}))}))},t.prototype.executeSelectHook=function(t,e){var n=this;return this.buildHooks(t).reduce((function(t,r){return r(e,n.entity)}),e)},t.hooks={},t.lastHookId=0,t}();var an={query:function(t){var e=this;return function(t){return new on(e,t)}},all:function(t){var e=this;return function(t){return new on(e,t).all()}},find:function(t){var e=this;return function(t,n){return new on(e,t).find(n)}},findIn:function(t){var e=this;return function(t,n){return new on(e,t).findIn(n)}}},un=function(){function t(){}return t.createPersistOptions=function(t){return{create:t.create,insert:t.insert,update:t.update,insertOrUpdate:t.insertOrUpdate}},t}();var sn={new:function(t,e){return Qt(this,void 0,void 0,(function(){return Jt(this,(function(t){return[2,new on(this,e.entity).new()]}))}))},create:function(t,e){return Qt(this,void 0,void 0,(function(){var t,n,r;return Jt(this,(function(i){return t=e.entity,n=e.data,r=un.createPersistOptions(e),[2,new on(this,t).create(n,r)]}))}))},insert:function(t,e){return Qt(this,void 0,void 0,(function(){var t,n,r;return Jt(this,(function(i){return t=e.entity,n=e.data,r=un.createPersistOptions(e),[2,new on(this,t).insert(n,r)]}))}))},update:function(t,e){return Qt(this,void 0,void 0,(function(){var t,n,r,i;return Jt(this,(function(o){return t=e.entity,n=e.data,r=e.where||null,i=un.createPersistOptions(e),[2,new on(this,t).update(n,r,i)]}))}))},insertOrUpdate:function(t,e){return Qt(this,void 0,void 0,(function(){var t,n,r;return Jt(this,(function(i){return t=e.entity,n=e.data,r=un.createPersistOptions(e),[2,new on(this,t).insertOrUpdate(n,r)]}))}))},delete:function(t,e){return Qt(this,void 0,void 0,(function(){var t,n;return Jt(this,(function(r){return t=e.entity,n=e.where,[2,new on(this,t).delete(n)]}))}))},deleteAll:function(t,e){return Qt(this,void 0,void 0,(function(){return Jt(this,(function(t){return e&&e.entity?(new on(this,e.entity).deleteAll(),[2]):(on.deleteAll(this),[2])}))}))}},cn=function(){function t(t,e,n){this.store=t,this.connection=e,this.entity=n,this.rootState=this.store.state[e],this.state=this.rootState[n]}return t.prototype.insert=function(t){var e;this.state.data=qt(qt({},this.state.data),((e={})[t.$id]=t,e))},t.prototype.insertRecords=function(t){this.state.data=qt(qt({},this.state.data),t)},t.prototype.delete=function(t){var e={};for(var n in this.state.data)t.includes(n)||(e[n]=this.state.data[n]);this.state.data=e},t}();var hn={$mutate:function(t,e){e.callback(t[e.entity])},insert:function(t,e){var n=e.entity,r=e.record;new cn(this,t.$name,n).insert(r)},insertRecords:function(t,e){var n=e.entity,r=e.records;new cn(this,t.$name,n).insertRecords(r)},delete:function(t,e){var n=e.entity,r=e.id;new cn(this,t.$name,n).delete(r)}},fn=function(){function t(){}return t.create=function(t){var e=this;return function(n,r,i){return e.generateIds(n,t),e.generateIndexId(n,t)}},t.generateIds=function(t,e){(Xt(e.primaryKey)?e.primaryKey:[e.primaryKey]).forEach((function(n){if(void 0===t[n]||null===t[n]){var r=e.getFields()[n];t[n]=r instanceof he?r.make():re.make()}}))},t.generateIndexId=function(t,e){return t.$id=e.getIndexIdFromRecord(t),t.$id},t}(),ln=function(){function t(t){var e=this;this.schemas={},this.model=t;var n=t.database().models();Object.keys(n).forEach((function(t){e.one(n[t])}))}return t.create=function(t){return new this(t).one()},t.prototype.one=function(t){if(t=t||this.model,this.schemas[t.entity])return this.schemas[t.entity];var e=new Ge.Entity(t.entity,{},{idAttribute:fn.create(t)});this.schemas[t.entity]=e;var n=this.definition(t);return e.define(n),e},t.prototype.many=function(t){return new Ge.Array(this.one(t))},t.prototype.union=function(t){return new Ge.Union(this.schemas,t)},t.prototype.definition=function(t){var e=this,n=t.getFields();return Object.keys(n).reduce((function(t,r){var i=n[r];return i instanceof fe&&(t[r]=i.define(e)),t}),{})},t}(),dn=function(){function t(){this.entities=[],this.schemas={},this.isStarted=!1}return t.prototype.start=function(t,e){this.store=t,this.namespace=e,this.connect(),this.registerModules(),this.createSchema(),this.isStarted=!0},t.prototype.register=function(t,e){void 0===e&&(e={}),this.checkModelTypeMappingCapability(t);var n={name:t.entity,base:t.baseEntity||t.entity,model:this.createBindingModel(t),module:e};this.entities.push(n),this.isStarted&&(this.registerModule(n),this.registerSchema(n))},t.prototype.model=function(t){var e="string"==typeof t?t:t.entity,n=this.models()[e];if(!n)throw new Error("[Vuex ORM] Could not find the model `"+e+"`. Please check if you have registered the model to the database.");return n},t.prototype.baseModel=function(t){var e="string"==typeof t?t:t.entity,n=this.baseModels()[e];if(!n)throw new Error("[Vuex ORM] Could not find the model `"+e+"`. Please check if you have registered the model to the database.");return n},t.prototype.models=function(){return this.entities.reduce((function(t,e){return t[e.name]=e.model,t}),{})},t.prototype.baseModels=function(){var t=this;return this.entities.reduce((function(e,n){return e[n.name]=t.model(n.base),e}),{})},t.prototype.module=function(t){var e=this.modules()[t];if(!e)throw new Error("[Vuex ORM] Could not find the module `"+t+"`. Please check if you have registered the module to the database.");return e},t.prototype.modules=function(){return this.entities.reduce((function(t,e){return t[e.name]=e.module,t}),{})},t.prototype.getState=function(){return this.store.state[this.namespace]},t.prototype.createBindingModel=function(t){var e,n=this;try{e=new Function("model","\n        'use strict';\n        return class "+t.name+" extends model {}\n      ")(t)}catch(n){e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Gt(e,t),e}(t),Object.defineProperty(e,"name",{get:function(){return t.name}})}return Object.defineProperty(e,"store",{value:function(){return n.store}}),e},t.prototype.registerModules=function(){this.store.registerModule(this.namespace,this.createModule())},t.prototype.registerModule=function(t){this.store.registerModule([this.namespace,t.name],this.createSubModule(t))},t.prototype.createModule=function(){var t=this,e=this.createRootModule();return this.entities.forEach((function(n){e.modules[n.name]=t.createSubModule(n)})),e},t.prototype.createRootModule=function(){return{namespaced:!0,state:this.createRootState(),getters:this.createRootGetters(),actions:this.createRootActions(),mutations:this.createRootMutations(),modules:{}}},t.prototype.createRootState=function(){var t=this;return function(){return{$name:t.namespace}}},t.prototype.createRootGetters=function(){var t=this;return te(an,(function(e,n){return an[n].bind(t.store)}))},t.prototype.createRootActions=function(){return sn},t.prototype.createRootMutations=function(){return hn},t.prototype.createSubModule=function(t){return{namespaced:!0,state:this.createSubState(t),getters:this.createSubGetters(t),actions:this.createSubActions(t),mutations:this.createSubMutations(t)}},t.prototype.createSubState=function(t){var e=this,n=t.name,r=t.model,i=t.module,o="function"==typeof r.state?r.state():r.state,a="function"==typeof i.state?i.state():i.state;return function(){return qt(qt(qt({},o),a),{$connection:e.namespace,$name:n,data:{}})}},t.prototype.createSubGetters=function(t){return qt(qt({},Se),t.module.getters)},t.prototype.createSubActions=function(t){return qt(qt({},Ee),t.module.actions)},t.prototype.createSubMutations=function(t){var e;return null!==(e=t.module.mutations)&&void 0!==e?e:{}},t.prototype.createSchema=function(){var t=this;this.entities.forEach((function(e){t.registerSchema(e)}))},t.prototype.registerSchema=function(t){this.schemas[t.name]=ln.create(t.model)},t.prototype.connect=function(){var t=this;this.store.$db=function(){return t}},t.prototype.checkModelTypeMappingCapability=function(t){},t}();return{install:function(t,e){void 0===e&&(e={});var n=e.namespace||"entities";return function(e){t.start(e,n),Wt.register(e)}},use:function(t,e){void 0===e&&(e={});var n={Model:Fe,Attribute:ie,Type:oe,Attr:ae,String:ue,Number:se,Boolean:ce,Uid:he,Relation:fe,HasOne:le,BelongsTo:de,HasMany:pe,HasManyBy:ye,BelongsToMany:me,HasManyThrough:ve,MorphTo:ge,MorphOne:be,MorphMany:we,MorphToMany:Oe,MorphedByMany:Ke,Getters:Se,Actions:Ee,RootGetters:an,RootActions:sn,RootMutations:hn,Query:on,Database:dn};t.install(n,e)},Container:Wt,Database:dn,Model:Fe,Attribute:ie,Type:oe,Attr:ae,String:ue,Number:se,Boolean:ce,Uid:he,Relation:fe,HasOne:le,BelongsTo:de,HasMany:pe,HasManyBy:ye,BelongsToMany:me,HasManyThrough:ve,MorphTo:ge,MorphOne:be,MorphMany:we,MorphToMany:Oe,MorphedByMany:Ke,Getters:Se,Actions:Ee,RootGetters:an,RootActions:sn,RootMutations:hn,Query:on}}();
